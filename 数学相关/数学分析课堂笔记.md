# 全微分不变性
$\text{设函数}z = f(u,v)\text{具有连续的偏导数，则有全微分}\mathbf{d}z = \frac{ \partial z }{ \partial u }\mathbf{d}u +\frac{ \partial z }{ \partial v }\mathbf{d}u\text{;当}u = \phi(x,y)\text{,}v = \psi(x,y)\text{时，该等式亦成立}$
*事实上我们有：*$$\begin{multline}
\mathbf{d}z = \frac{ \partial z }{ \partial x }\mathbf{d}x +\frac{ \partial z }{ \partial y }\mathbf{d}y =
\left( \frac{ \partial z }{ \partial u }\frac{ \partial u }{ \partial x }+\frac{ \partial z }{ \partial v }\frac{ \partial v }{ \partial x } \right)dx+\left( \frac{ \partial z }{ \partial u }\frac{ \partial u }{ \partial y }+\frac{ \partial z }{ \partial v }\frac{ \partial v }{ \partial y } \right)dy = \frac{ \partial z }{ \partial u } \left( \frac{ \partial u }{ \partial x } dx + \frac{ \partial u }{ \partial y }dy  \right)+\frac{ \partial z }{ \partial v } \left( \frac{ \partial v }{ \partial x }dx +\frac{ \partial v }{ \partial y } dy  \right)=
\frac{ \partial z }{ \partial u } du + \frac{ \partial z }{ \partial v } dv
\end{multline}$$
练习:
$\text{已知}e^{-xy}-2z+e^{z}=0\text{求}\frac{ \partial z }{ \partial x }\text{和}\frac{ \partial z }{ \partial y }$
$\text{事实上由隐函数定理我们可知}\frac{ \partial z }{ \partial x }=-\frac{F_{x}(x,y,z)}{F_{z}(x,y,z)}=\frac{-2+e^{z}}{ye^{-xy}}$
$\text{以及}\frac{ \partial z }{ \partial y }=-\frac{F_{z}(x,y,z)}{F_{y}(x,y,z)}=\frac{-2+e^{z}}{xe^{-xy}}$
$\text{其中}F(x,y,z)=e^{-xy}-2z+e^{z}$
也可以使用在两边求取全微分的方法

$\text{已知}u=f(x,y,z),y=\phi(x,t),t=\psi(x,z)$
$\text{求解}\frac{ \partial u }{ \partial x }$
$\text{事实上}du =f_{x}dx+f_{y}dy+f_{z}dz=f_{x}dx+f_{y}d\phi+f_{z}dz=f_{x}dx+f_{y}(\phi_{x}dx+\phi_{t}dt)+f_{z}dz=(f_{x}+f_{y}\phi_{x})dx+f_{y}\phi_{t}(\psi_{x}dx+\psi_{z}dz)+f_{z}dz$
$=(f_{x}+f_{y}\phi_{x}+f_{y}\phi_{t}\psi_{x})dx+(f_{y}\phi_{t}\psi_{z}+f_{z})dz$
$\text{由此我们便求得}\frac{ \partial u }{ \partial x }$
或者我们可以使用偏导数的链式法则来求解

$\text{设}z=e^{xy}\sin(x+y),\text{求解}\frac{ \partial z }{ \partial x }与\frac{ \partial z }{ \partial y }$
$\text{设}u = xy,v=x+y,\text{则原式化为}z=e^{u}\sin v$
从而我们有$dz = e^{u}\sin v du +e^{u}\cos vdv=e^u\sin v(ydx+xdy)+e^u\cos v(dx+dy)=(ye^u\sin v+e^u\cos v)dx+(xe^u\sin v+e^u\cos v)dy$
$\text{回代}u,v\text{便可得解}$

# 方向导数和梯度
## 方向导数
我们知道，$f(x,y)的偏导数可以表示为f_{x}(x_{0},y_{0})=\lim_{ \Delta x \to 0 } \frac{f(x_{0}+\Delta x,y_{0})-f(x_{0},y_{0})}{\Delta x}$
以及$f_{y}(x_{0},y_{0})=\lim_{ \Delta x \to 0 } \frac{f(x_{0}+\Delta x,y_{0})-f(x_{0},y_{0})}{\Delta y}$
实际上这是函数$f(x,y)沿着(1,0)与(0,1)方向的变化率，从而一般地，我们可以给出方向导数的定义：$
	*Define:方向导数*
	$$
\begin{gather}
z=f(x,y)\in D是定义在D上的二元函数，(x_{0},y_{0})\in D,\vec{v}=(\cos\alpha,\sin\alpha)是一个方向，若极限 \\
\lim_{ t \to 0 } \frac{f(x_{0}+t\cos\alpha,y_{0}+t\sin\alpha)-f(x_{0},y_{0})}{t} \\
存在，则称此极限为函数f在(x_{0},y_{0})沿\vec{v}的方向导数，记作\frac{ \partial f }{ \partial \vec{v} } (x_{0},y_{0})
\end{gather}
$$
定理：
$若z=f(x,y)在P(x_{0},y_{0})处可微，那该函数在该点沿任意方向的偏导数都存在，且我们有：$
$\frac{ \partial f }{ \partial \vec{v} }=\frac{ \partial f }{ \partial x }\cos\alpha+\frac{ \partial f }{ \partial y }\sin\alpha,其中\vec{v}=(\cos\alpha,\sin\alpha)$
证明如下：
$由于f在P点处可微，从而我们有：$
$f(x_{0}+t\cos\alpha,y_{0}+t\sin\alpha)-f(x_{0},y_{0})=f_{x}(x_{0},y_{0})t\cos\alpha+f_{y}(x_{0},y_{0})t\sin \alpha+o(t)$
$两边除以t并令t\rightarrow0即可得证$
## 梯度
有了方向导数，我们就可以引入梯度的概念
在深度学习或者其它的应用环境中，我们常常需要找到一个多元函数的最小值（或者最大值），一种思路是我们可以沿着函数变化最小（最大）的方向缓慢前进，注意到前进的量可以用$f(x_{0}+t\cos\alpha,y_{0}+t\sin\alpha)-f(x_{0},y_{0})$来表示，$除掉t标准化并令t\rightarrow 0便得到方向导数$
事实上由柯西不等式：$f_{x}\cos\alpha+f_{y}\sin \alpha\leq \sqrt{ (f_{x}^2+f_{y}^2)(\cos^2\alpha+\sin^2\alpha) }=\sqrt{ f_{x}^2 +f_{y}^2}$
$当且仅当\tan\alpha= \frac{f_{y}}{f_{x}}时等号成立$
$记gradf(x_{0},y_{0})=(f_{x}(x_{0},y_{0}),f_{y}(x_{0},y_{0}))$
$注意到此时gradf正好是我们需要的变化最大的方向，我们把这个方向成为f的梯度$
$事实上，记\vec{v}为一方向向量(即|\vec{v}|=1),则\frac{ \partial f }{ \partial \vec{v} }=gradf \cdot\vec{v}显然在\vec{v}与gradf同向时取得最大值，反向时取得最小值$


